<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Virtual Tour Pura Lingsar</title>
    <!-- Include the Tailwind CSS CDN -->
    <link href="../assets/css/output.css" rel="stylesheet" />
    <!-- <link href="../assets/vendor/owl/owl.carousel.min.css" rel="stylesheet" />
    <link href="../assets/vendor/owl/owl.theme.default.min.css" rel="stylesheet" /> -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <!-- <script src="../assets/vendor/owl/owl.carousel.min.js"></script> -->
  </head>

  <body class="bg-slate-200">
    <!-- Navbar -->
    <nav id="navbar" class="bg-primary px-4 sm:px-10 py-4 sticky top-0">
      <div class="3xl:container flex justify-between items-center">
        <!-- Logo -->
        <div class="flex items-center">
          <a href="beranda.html" class="text-white text-xl font-bold flex items-center space-x-2">
            <img src="../assets/img/logo.png" alt="logo" class="max-w-[60px]">
            <span>
              Virtual Tour Pura Lingsar
            </span>
          </a>
        </div>
        <!-- Navbar Links -->
        <div class="hidden lg:flex md:items-center md:space-x-1">
          <a href="../beranda.html" class="text-white hover:bg-white hover:text-black py-1 px-4 rounded-lg">Beranda</a>
          <a href="../aset.html" class="text-white active hover:bg-white hover:text-black py-1 px-4 rounded-lg">Aset</a>
          <a href="../virtual_tour.html" class="text-white hover:bg-white hover:text-black py-1 px-4 rounded-lg">Virtual Tour 360 &deg;</a>
          <a href="../3d_explorer.html" class="text-white hover:bg-white hover:text-black py-1 px-4 rounded-lg">3D Explorer</a>
          <a href=../informasi.html" class="text-white hover:bg-white hover:text-black py-1 px-4 rounded-lg">Informasi</a>
        </div>
        <!-- Mobile Menu Button (Hamburger Icon) -->
        <div id="mobileMenuBTN" class="lg:hidden">
          <button class="text-white focus:outline-none">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
            </svg>
          </button>
        </div>
      </div>
      <!-- Mobile Menu (Hidden by Default) -->
      <div id="mobileMenu" class="hidden lg:hidden bg-primary py-4">
        <a href="../beranda.html" class="block text-white py-2 px-4 hover:bg-white hover:text-black rounded-full">Beranda</a>
        <a href="../aset.html" class="block text-white py-2 px-4 hover:bg-white hover:text-black rounded-full">Aset</a>
        <a href="../virtual_tour.html" class="block text-white py-2 px-4 hover:bg-white hover:text-black rounded-full">Virtual Tour 360 &deg;</a>
        <a href="../3d_explorer.html" class="block text-white py-2 px-4 hover:bg-white hover:text-black rounded-full">3D Explorer</a>
        <a href="../informasi.html" class="block text-white py-2 px-4 hover:bg-white hover:text-black rounded-full">Informasi</a>
      </div>
    </nav>

    <div class="3xl:container overflow-x-clip">
      <div class="py-5 px-4 sm:px-10 md:py-14">
        <div class="flex justify-evenly text-white items-center bg-primary py-4 md:py-6 flex-col md:flex-row">
          <h1 class="text-2xl font-bold mb-5 md:text-3xl md:mb-0">Foto Aset</h1>
          <div id="menuFotoAsset" class="flex space-x-1 text-sm md:text-[16px]">
            <button data-type="semua" class="hover:bg-slate-200 bg-white text-black px-4 py-1 rounded hover:scale-[1.1] transition font-semibold shadow capitalize">semua</button>
            <button data-type="bale" class="hover:bg-slate-200 bg-white text-black px-4 py-1 rounded hover:scale-[1.1] transition font-semibold shadow capitalize">Bale</button>
            <button data-type="pelinggih" class="hover:bg-slate-200 bg-white text-black px-4 py-1 rounded hover:scale-[1.1] transition font-semibold shadow capitalize">Pelinggih</button>
            <button data-type="patung" class="hover:bg-slate-200 bg-white text-black px-4 py-1 rounded hover:scale-[1.1] transition font-semibold shadow capitalize">Patung</button>
          </div>
        </div>
        <div id="cardsFotoAsset" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-8 place-items-center mt-5 relative">
          <div class="bg-white shadow rounded-md cursor-pointer hover:shadow-xl transition item p-2">
            <div class="carousel relative overflow-hidden">
              <div id="carousel-slide" class="flex transition-all">
                <img class="w-full" src="../assets/img/hero.jpg" alt="img" />
                <img class="w-full" src="../assets/img/hero.jpg" alt="img" />
                <img class="w-full" src="../assets/img/hero.jpg" alt="img" />
                <img class="w-full" src="../assets/img/hero.jpg" alt="img" />
              </div>
              <button id="prev" class="w-8 h-8 flex items-center justify-center bg-white rounded-full text-black font-bold absolute top-1/2 -translate-y-1/2 cursor-pointer z-10 left-2"><i class="fa-solid fa-chevron-left"></i></button>
              <button id="next" class="w-8 h-8 flex items-center justify-center bg-white rounded-full text-black font-bold absolute top-1/2 -translate-y-1/2 cursor-pointer z-10 right-2"><i class="fa-solid fa-chevron-right"></i></button>
            </div>
            <div class="p-4">
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis non quisquam ipsa unde? A ex nesciunt quo perspiciatis, sequi debitis.</p>
              <center>
                <a id="showdetail" class="text-white mt-3 inline-block py-1 px-4 bg-green-600 hover:bg-green-800 rounded-full shadow">Show More</a>
              </center>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="popup-container" class="fixed inset-0 bg-gray-900 bg-opacity-50 items-start sm:items-center hidden z-50 h-screen">
      <div class="relative bg-white px-4 pb-5 pt-16 rounded shadow-md animate-popupAnimation 3xl:container h-full">
        <button id="close-button" class="absolute top-2 left-2 md:top-5 md:left-5 w-6 h-6 bg-white rounded-full md:w-8 md:h-8 mb-5 text-xl">
          <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-arrow-left-circle text-slate-600 hover:text-red-600 active:text-slate-600" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z" />
          </svg>
        </button>
        <div id="contentPopup" class="h-full">
           <iframe src="https://nusaheritage.id/objekmetadata/warisanberwujud/candi-bentar-pertama" class="w-full border-2 border-gray-300 rounded-lg h-full"></iframe>
        </div>
      </div>
    </div>

    <!-- <footer class="py-8 border border-top-slate-900 text-center">
        <div id="sosial-media" class="text-3xl text-slate-600 space-x-3">
            <a href="#"><i class="hover:cursor-pointer fa-brands fa-instagram"></i></a>
            <a href="#"><i class="hover:cursor-pointer fa-brands fa-facebook-f"></i></a>
            <a href="#"><i class="hover:cursor-pointer fa-brands fa-twitter"></i></a>
        </div>
        <div id="footer-item" class="space-x-3 my-3">
            <a href="beranda.html" class="text-blue-600 hover:cursor-pointer">Beranda</a>
            <a href="#" class="text-blue-600 hover:cursor-pointer">Kontak</a>
            <a href="#" class="text-blue-600 hover:cursor-pointer">Blog</a>
        </div>
        <span class="text-slate-400 font-open-sans">&copy; Copyright 2024, All rights reserved.</span>
    </footer> -->
    <!-- Custom JavaScript to toggle mobile menu -->
     <script src="../assets/js/crouselku.js"></script>
     <script src="../assets/js/data-asset.js"></script>
    <script>
      const menuBtn = document.querySelector('#mobileMenuBTN');
      const mobileMenu = document.querySelector('#mobileMenu');
      const tempFotoAssets = document.querySelector('#cardsFotoAsset');
      const popupContainer = document.querySelector('#popup-container');
      const closeBtnPopup = document.querySelector('#close-button');
      const menuFotoAssets = document.querySelectorAll('#menuFotoAsset > button');

      let fotopPotrait = dataFotoAsset.filter((a) => a.imgType == 'potrait');
      let fotoLandscape = dataFotoAsset.filter((a) => a.imgType == 'landscape');
      const allFotoAsset = [...fotopPotrait, ...fotoLandscape];

      function loadDataAsset(data) {
        let imgs = '';
        data.img.map(url => {
           imgs += `<img class="w-full" src="${url}" alt="img" />`;
        });

        return `
            <div class="bg-white shadow rounded-md cursor-pointer hover:shadow-xl transition item p-2">
            <div class="crousel relative overflow-hidden">
              <div class="flex transition-all crousel-slide" data-counter='0'>
                ${imgs}
              </div>
              <button class="prev w-8 h-8 flex items-center justify-center bg-white rounded-full text-black font-bold absolute top-1/2 -translate-y-1/2 cursor-pointer z-[1] left-2"><i class="fa-solid fa-chevron-left"></i></button>
              <button class="next w-8 h-8 flex items-center justify-center bg-white rounded-full text-black font-bold absolute top-1/2 -translate-y-1/2 cursor-pointer z-[1] right-2"><i class="fa-solid fa-chevron-right"></i></button>
            </div>
            <div class="p-4">
              <p class="font-bold text-center">${data.deskripsi}</p>
              <center>
                <a data-id='${data.id}' id="showdetail" class=" text-sm text-white mt-3 inline-block py-1 px-4 bg-green-600 hover:bg-green-800 rounded-full shadow">Show More</a>
              </center>
            </div>
          </div>
            `;
      }

      function loadPopup(data) {
        return `
          <iframe src="${data.metadata}" class="w-full border-2 border-gray-300 rounded-lg h-full"></iframe>
        `;
      }

      function initialize() {
        const readMore = document.querySelectorAll('#showdetail');
        
        readMore.forEach((el) => {
          const contentPopup = document.querySelector('#contentPopup');
          el.addEventListener('click', () => {
            // mencari element parent dari element yang di click berdasar id
            // e.target.closest('#cardsFotoAssetItem')
            const id = el.getAttribute('data-id');
            const data = dataFotoAsset.find((e) => e.id == id);
            contentPopup.innerHTML = loadPopup(data);
            // popupContainer.classList.add('flex');
            popupContainer.classList.remove('hidden');
          });
        });

        closeBtnPopup.addEventListener('click', () => {
          popupContainer.classList.add('hidden');
          popupContainer.classList.remove('flex');
        });
      }

      menuBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
      });

      window.addEventListener('load', () => {
        tempFotoAssets.innerHTML = '';
        allFotoAsset.forEach((data) => {
          tempFotoAssets.innerHTML += loadDataAsset(data);
        });

        initialize();
        initCrousel();
      });

      menuFotoAssets.forEach((el) => {
        el.addEventListener('click', () => {
          tempFotoAssets.innerHTML = '';
          const type = el.getAttribute('data-type');
          if (type != 'semua') {
            const fotoAssets = allFotoAsset.filter((a) => a.type == type);
            fotoAssets.forEach((data) => {
              tempFotoAssets.innerHTML += loadDataAsset(data);
            });
          } else {
            allFotoAsset.forEach((data) => {
              tempFotoAssets.innerHTML += loadDataAsset(data);
            });
          }

          initialize();
          initCrousel();
        });
      });

      window.onscroll = function () {
        var navbarContent = document.querySelector('#navbar');
        if (window.pageYOffset > 25) {
          navbarContent.classList.add('scrollAnimate');
        } else {
          navbarContent.classList.remove('scrollAnimate');
        }
      };
    </script>
  </body>
</html>
