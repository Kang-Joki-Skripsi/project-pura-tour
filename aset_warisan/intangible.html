<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Virtual Tour Pura Lingsar</title>
    <!-- Include the Tailwind CSS CDN -->
    <link href="../assets/css/output.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  </head>

  <body class="bg-slate-200">
    <!-- Navbar -->
    <nav id="navbar" class="bg-primary px-4 sm:px-10 py-4 top-0">
      <div class="3xl:container flex justify-between items-center">
        <div>
          <!-- Logo -->
          <a href="../beranda.html" class="text-white text-[16px] md:text-xl font-bold flex items-center space-x-2">
            <img src="../assets/img/logo.png" alt="logo" class="max-w-[45px] md:max-w-[60px]">
            <span>
              Virtual Reality Tour Pura Lingsar
            </span>
          </a>
          <!-- Navbar Links -->
          <div class="hidden lg:flex md:items-center md:space-x-1 mt-2">
            <a href="../beranda.html" class="text-white hover:bg-white hover:text-black py-1 px-4 rounded-full">Beranda</a>
            <a href="../aset.html" class="text-white active hover:bg-white hover:text-black py-1 px-4 rounded-full">Aset</a>
            <a href="../virtual_tour/index.htm" class="text-white hover:bg-white hover:text-black py-1 px-4 rounded-full">Virtual Tour 360 &deg;</a>
            <a href="../3d_explorer.html" class="text-white hover:bg-white hover:text-black py-1 px-4 rounded-full">3D Explorer</a>
            <a href="../informasi.html" class="text-white hover:bg-white hover:text-black py-1 px-4 rounded-full">Informasi</a>
          </div>
        </div>
        <div class="hidden lg:block">
          <p class="text-right text-white font-semibold">Desa Lingsar, <br> Kecamatan Lingsar, <br>Provinsi NTB</p>
        </div>
        <!-- Mobile Menu Button (Hamburger Icon) -->
        <div id="mobileMenuBTN" class="lg:hidden">
          <button class="text-white focus:outline-none">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
            </svg>
          </button>
        </div>
      </div>
      <!-- Mobile Menu (Hidden by Default) -->
      <div id="mobileMenu" class="hidden lg:hidden bg-primary py-4">
        <a href="../beranda.html" class="block text-white py-2 px-4 hover:bg-white hover:text-black rounded-full">Beranda</a>
        <a href="../aset.html" class="block text-white py-2 px-4 hover:bg-white hover:text-black rounded-full">Aset</a>
        <a href="../virtual_tour/index.htm" class="block text-white py-2 px-4 hover:bg-white hover:text-black rounded-full">Virtual Tour 360 &deg;</a>
        <a href="../3d_explorer.html" class="block text-white py-2 px-4 hover:bg-white hover:text-black rounded-full">3D Explorer</a>
        <a href="../informasi.html" class="block text-white py-2 px-4 hover:bg-white hover:text-black rounded-full">Informasi</a>
      </div>
    </nav>
    
    <div class="3xl:container overflow-x-clip">
      <div class="py-5 px-4 sm:px-10 md:py-14">
        <div class="flex justify-evenly text-white items-center bg-primary py-4 md:py-6 flex-col md:flex-row">
          <h1 class="text-2xl font-bold mb-5 md:text-3xl md:mb-0">Foto Aset</h1>
        </div>
        <div class="flex justify-center w-full py-16" id="loading">
          <div class="flex items-center w-1/2 justify-center">
            <div class="animate-spin w-5 h-5 rounded-full border-t-2 border-r-2 border-slate-700 mr-4"></div>
            Load Data...
          </div>
        </div>
        <div id="cardsFotoAsset" class="flex justify-center mt-5 relative">
        </div>
      </div>
    </div>

    <div id="popup-container" class="fixed inset-0 bg-gray-900 bg-opacity-50 items-start sm:items-center hidden z-50 h-screen">
      <div class="relative bg-white px-4 pb-5 pt-16 rounded shadow-md animate-popupAnimation 3xl:container h-full">
        <button id="close-button" class="absolute top-2 left-2 md:top-5 md:left-5 w-6 h-6 bg-white rounded-full md:w-8 md:h-8 mb-5 text-xl">
          <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-arrow-left-circle text-slate-600 hover:text-red-600 active:text-slate-600" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z" />
          </svg>
        </button>
        <div id="contentPopup" class="h-full">
           <iframe src="https://nusaheritage.id/objekmetadata/warisanberwujud/candi-bentar-pertama" class="w-full border-2 border-gray-300 rounded-lg h-full"></iframe>
        </div>
      </div>
    </div>


    <!-- <footer class="py-8 border border-top-slate-900 text-center">
        <div id="sosial-media" class="text-3xl text-slate-600 space-x-3">
            <a href="#"><i class="hover:cursor-pointer fa-brands fa-instagram"></i></a>
            <a href="#"><i class="hover:cursor-pointer fa-brands fa-facebook-f"></i></a>
            <a href="#"><i class="hover:cursor-pointer fa-brands fa-twitter"></i></a>
        </div>
        <div id="footer-item" class="space-x-3 my-3">
            <a href="beranda.html" class="text-blue-600 hover:cursor-pointer">Beranda</a>
            <a href="#" class="text-blue-600 hover:cursor-pointer">Kontak</a>
            <a href="#" class="text-blue-600 hover:cursor-pointer">Blog</a>
        </div>
        <span class="text-slate-400 font-open-sans">&copy; Copyright 2024, All rights reserved.</span>
    </footer> -->
    <!-- Custom JavaScript to toggle mobile menu -->
     <script src="../assets/js/crouselku.js"></script>
    <script>
      const menuBtn = document.querySelector('#mobileMenuBTN');
      const mobileMenu = document.querySelector('#mobileMenu');
      const tempFotoAssets = document.querySelector('#cardsFotoAsset');
      const popupContainer = document.querySelector('#popup-container');
      const closeBtnPopup = document.querySelector('#close-button');
      const menuFotoAssets = document.querySelectorAll('#menuFotoAsset > button');

      const dataFotoAsset = [
        {
          id: 1,
          title: "Perang Topat Di Pura Lingsar",
          metadata: 'https://nusaheritage.id/objekmetadata/warisanberwujud/candi-bentar-pertama',
          img: [
            "../assets/img/intangible/IMG_4465.webp",
            "../assets/img/intangible/Perang-Topat-di-Pura-Lingsar-14-2048x1290.webp",
            "../assets/img/intangible/perang-topat.jpeg",
          ],
          deskripsi: `Event tahunan Perang Topat adalah sebuah acara adat yang diadakan di Pura Lingsar, Kabupaten Lombok Barat. Perang ini merupakan simbol perdamaian antara umat Muslim dan Hindu di Lombok. Acara ini dilakukan pada sore hari, setiap bulan purnama ke tujuh dalam penanggalan Suku Sasak.
          Perang Topat menjadi salah satu event yang masuk dalam Kharisma Event Nusantara (KEN) 2023 atau kalender pariwisata nasional. Selain itu, Perang Topat juga merupakan Warisan Budaya Takbenda (WBTB) yang diakui secara nasional melalui surat keputusan Menteri Pendidikan dan Kebudayaan RI, Nomor 19255/mpk.F/kb/2020.
          Pura Lingsar tempat diselenggarakan ini juga adalah sebuah pelajaran tentang toleransi. Sehingga Perang Topat dan Pujawali ini bukan hanya sebagai ritual tahunan, tetapi ini juga momentum untuk kita mengecas spirit toleransi yang semakin dibutuhkan didalam kita mengisi proses pembangunan di daerah maupun negara`,
        },
      ];

      function loadDataAsset(data) {
        let imgs = '';
        data.img.map(url => {
           imgs += `<img class="w-full" src="${url}" alt="img" />`;
        });
        return `
              <div class="bg-white shadow rounded-md cursor-pointer hover:shadow-xl transition item p-2 lg:w-1/2">
                <div class="crousel relative overflow-hidden">
                  <div class="flex transition-all crousel-slide" data-counter='0'>
                    ${imgs}
                  </div>
                  <button class="prev w-8 h-8 flex items-center justify-center bg-white rounded-full text-black font-bold absolute top-1/2 -translate-y-1/2 cursor-pointer z-[1] left-2"><i class="fa-solid fa-chevron-left"></i></button>
                  <button class="next w-8 h-8 flex items-center justify-center bg-white rounded-full text-black font-bold absolute top-1/2 -translate-y-1/2 cursor-pointer z-[1] right-2"><i class="fa-solid fa-chevron-right"></i></button>
                </div>
                <div class="p-4">
                  <p class="font-bold text-center text-xl">${data.title}</p>
                  <p class="mt-5 text-justify">Event tahunan Perang Topat adalah sebuah acara adat yang diadakan di Pura Lingsar, Kabupaten Lombok Barat. Perang ini merupakan simbol perdamaian antara umat Muslim dan Hindu di Lombok. Acara ini dilakukan pada sore hari, setiap bulan purnama ke tujuh dalam penanggalan Suku Sasak.

                  Perang Topat menjadi salah satu event yang masuk dalam Kharisma Event Nusantara (KEN) 2023 atau kalender pariwisata nasional. Selain itu, Perang Topat juga merupakan Warisan Budaya Takbenda (WBTB) yang diakui secara nasional melalui surat keputusan Menteri Pendidikan dan Kebudayaan RI, Nomor 19255/mpk.F/kb/2020.

                  Pura Lingsar tempat diselenggarakan ini juga adalah sebuah pelajaran tentang toleransi. Sehingga Perang Topat dan Pujawali ini bukan hanya sebagai ritual tahunan, tetapi ini juga momentum untuk kita mengecas spirit toleransi yang semakin dibutuhkan didalam kita mengisi proses pembangunan di daerah maupun negara</p>
                </div>
              </div>
            `;
      }

      function loadPopup(data) {
        return `
          <iframe src="${data.metadata}" class="w-full border-2 border-gray-300 rounded-lg h-full"></iframe>
        `;
      }

      function initialize() {
        // const fotoAssets = document.querySelectorAll('#cardsFotoAsset .item');
        const readMore = document.querySelectorAll('#showdetail');
        // fotoAssets.forEach((el) => {
        //   el.addEventListener('click', () => {
        //     fotoAssets.forEach((item) => (item != el ? item.classList.remove('zoomIn') : ''));
        //     el.classList.toggle('zoomIn');
        //   });
        // });

        readMore.forEach((el) => {
          const contentPopup = document.querySelector('#contentPopup');
          el.addEventListener('click', (e) => {
             // mencari element parent dari element yang di click berdasar id
            // e.target.closest('#cardsFotoAssetItem')
            const id = el.getAttribute('data-id');
            const data = dataFotoAsset.find((e) => e.id == id);
            contentPopup.innerHTML = loadPopup(data);
            // popupContainer.classList.add('flex');
            popupContainer.classList.remove('hidden');
          });
        });

        closeBtnPopup.addEventListener('click', () => {
          popupContainer.classList.add('hidden');
          popupContainer.classList.remove('flex');
          document.body.classList.remove('overflow-hidden')
        });
      }

      menuBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
      });

      window.addEventListener('load', () => {
        document.querySelector("#loading").classList.add('hidden');
        tempFotoAssets.innerHTML = '';
        dataFotoAsset.forEach((data) => {
          tempFotoAssets.innerHTML += loadDataAsset(data);
        });

        initialize();
        initCrousel();
      });

      menuFotoAssets.forEach((el) => {
        el.addEventListener('click', () => {
          tempFotoAssets.innerHTML = '';
          const type = el.getAttribute('data-type');
          if (type != 'semua') {
            const fotoAssets = dataFotoAsset.filter((a) => a.type == type);
            fotoAssets.forEach((data) => {
              tempFotoAssets.innerHTML += loadDataAsset(data);
            });
          } else {
            dataFotoAsset.forEach((data) => {
              tempFotoAssets.innerHTML += loadDataAsset(data);
            });
          }

          initialize();
        });
      });

      window.onscroll = function () {
        // var navbarContent = document.querySelector('#navbar');
        // if (window.pageYOffset > 100) {
        //   navbarContent.classList.add('scrollAnimate');
        // } else {
        //   navbarContent.classList.remove('scrollAnimate');
        // }
      };
    </script>
  </body>
</html>
